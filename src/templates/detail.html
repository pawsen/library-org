{% extends "base.html" %}

{% block inlinecss %}
<style type="text/css">
    .detail-page {
        margin-top: 8px;
        margin-bottom: 8px;
    }

    .detail-card {
        background: #fff;
        border-radius: 6px;
        padding: 8px 10px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
    }

    .detail-view-title {
        font-size: 1.6rem;
        font-weight: 600;
        margin-bottom: 8px;
    }

    .detail-view-fields p {
        margin-bottom: 6px;
    }

    .detail-view-image img {
        max-width: 100%;
        height: auto;
        border-radius: 8px;
    }

    /* Mobile */
    @media (max-width: 767px) {
        .detail-view-image {
            text-align: center;
            margin-bottom: 16px;
        }

        .detail-view-title {
            text-align: center;
            font-size: 1.4rem;
        }
    }

    /* Navigation buttons */
    /* Tiny Prev / Next / Edit buttons in detail top nav */
    .detail-nav {
        margin: 4px 0;
    }

    .detail-nav .nav {
        display: flex;
        justify-content: flex-end;
        flex-wrap: wrap;
        gap: 4px;
        padding-left: 0;
        margin-bottom: 0;
        list-style: none;
    }

    .detail-nav .nav-item {
        float: none;
    }

    /* Make links very small, unobtrusive pills */
    .detail-nav .nav>li>a.nav-link,
    .detail-nav .nav>li>span.nav-link {
        display: inline-block;
        padding: 1px 6px;
        /* smaller padding */
        font-size: 0.7rem;
        /* smaller text */
        line-height: 1.2;
        border-radius: 999px;

        background-color: #337ab7;
        color: #fff;
        border: 1px solid #2e6da4;
        text-decoration: none;
        width: auto;
        float: none;
    }

    .detail-nav .nav>li>a.nav-link:hover,
    .detail-nav .nav>li>a.nav-link:focus {
        background-color: #286090;
        border-color: #204d74;
        color: #fff;
        text-decoration: none;
    }

    /* Disabled variant */
    .detail-nav .nav>li>span.nav-link.disabled {
        background-color: #ccc;
        border-color: #bbb;
        color: #666;
        cursor: default;
        pointer-events: none;
    }
</style>
{% endblock %}

{% block main %}

{% if book.id %}
<nav class="detail-nav">
    <ul class="nav">
        <li class="nav-item">
            <a class="nav-link" href="{{ url_for('detail', id=book.id-1) }}">Prev</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="{{ url_for('detail', id=book.id+1) }}">Next</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="{{ url_for('edit_book', id=book.id) }}">Edit</a>
        </li>
    </ul>
</nav>
{% endif %}

<div class="container-fluid detail-page">
    <div class="row">
        <div class="col-xs-12 col-md-10 col-md-offset-1">
            <div class="detail-card">

                <div class="row detail-view-container">

                    <!-- Book Details -->
                    <div class="col-xs-12 col-md-8 detail-view-fields">
                        <h2 class="detail-view-title">{{ book.title }}</h2>

                        <p><strong>Author(s):</strong> {{ book.authors }}</p>

                        {% if book.publish_date %}
                        <p><strong>Published:</strong> {{ book.publish_date }}</p>
                        {% endif %}

                        {% if book.number_of_pages %}
                        <p><strong>Pages:</strong> {{ book.number_of_pages }}</p>
                        {% endif %}

                        {% if book.document_path %}
                        <p>
                            <strong>Document:</strong>
                            <a href="{{ url_for('download_document', id=book.id) }}" target="_blank">
                                Download PDF
                            </a>
                        </p>
                        {% endif %}

                        {% if book.description %}
                        <p><strong>Description:</strong></p>
                        <p>{{ book.description }}</p>
                        {% endif %}

                        {% if book.subjects %}
                        <p><strong>Subjects:</strong> {{ book.subjects }}</p>
                        {% endif %}

                        <p><strong>Links:</strong>
                            {% if book.isbn %}
                            <a href="https://www.amazon.com/gp/search?index=books&field-isbn={{ book.isbn }}"
                                target="_blank">
                                ISBN: {{ book.isbn }}
                            </a>
                            <b>;</b>
                            {% endif %}
                            <a href="https://google.com/search?q={{ book.title }}+{{ book.authors }}" target="_blank">
                                Google Search
                            </a>
                            {% if book.openlibrary_preview_url %}
                            <b>;</b>
                            <a href="{{ book.openlibrary_preview_url }}" target="_blank">
                                Online Preview
                            </a>
                            {% endif %}
                        </p>

                        {% if location_display %}
                        <p><strong>Location:</strong>
                            {{ location_display.label_name }}, {{ location_display.full_name }}
                        </p>
                        {% else %}
                        <p><strong>Location:</strong> Not specified</p>
                        {% endif %}
                    </div>


                    <!-- Book Image -->
                    <div class="col-xs-12 col-md-4 detail-view-image">
                        {% if book.openlibrary_medcover_url %}
                        <img src="{{ book.openlibrary_medcover_url }}" alt="{{ book.title }} Cover" loading="lazy">
                        {% else %}
                        <img src="{{ url_for('static', filename='dist/images/lincoln-inaug-bible.jpg') }}" alt="Default Book Cover">
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}
